<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>boss直聘招聘信息</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        .title {
            text-align: center;
            font-size: 28px;
            padding: 20px;
        }
    </style>
</head>

<body>
    <p>2018/12/29</p>
    <p class='title'>web前端（广州） <span class="t1"></span></p>
    <div id="chart" style="height:400px;"></div>

    <p class='title'>web前端（深圳） <span class="t11111"></span></p>
    <div id="chart11111" style="height:400px;"></div>

    <p class='title'>JAVA <span class="t2"></span></p>
    <div id="chart2" style="height:400px;"></div>

    <p class='title'>php <span class="t3"></span></p>
    <div id="chart3" style="height:400px;"></div>

    <p class='title'>python <span class="t4"></span></p>
    <div id="chart4" style="height:400px;"></div>

    <p class='title'>node <span class="t5"></span></p>
    <div id="chart5" style="height:400px;"></div>

    <p class='title'>测试 <span class="t6"></span></p>
    <div id="chart6" style="height:400px;"></div>

    <p class='title'>golang <span class="t7"></span></p>
    <div id="chart7" style="height:400px;"></div>

    <p class='title'>算法 <span class="t8"></span></p>
    <div id="chart8" style="height:400px;"></div>

    <p class='title'>产品 <span class="t9"></span></p>
    <div id="chart9" style="height:400px;"></div>

    <p class='title'>ui <span class="t10"></span></p>
    <div id="chart10" style="height:400px;"></div>

    <p class='title'>android <span class="t11"></span></p>
    <div id="chart11" style="height:400px;"></div>

    <p class='title'>ios <span class="t12"></span></p>
    <div id="chart12" style="height:400px;"></div>

</body>

</html>
<script src="//libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
<script src="//cdn.bootcss.com/echarts/4.2.0-rc.2/echarts.min.js"></script>
<script>

    // 初始化图表标签

    chart({ jsonRoute: './jsonData/web.json', avgElement: $('.t1'), ChartId: 'chart' })

    chart({ jsonRoute: './jsonData/web(sz).json', avgElement: $('.t11111'), ChartId: 'chart11111' })

    chart({ jsonRoute: './jsonData/java.json', avgElement: $('.t2'), ChartId: 'chart2' })

    chart({ jsonRoute: './jsonData/php.json', avgElement: $('.t3'), ChartId: 'chart3' })

    chart({ jsonRoute: './jsonData/python.json', avgElement: $('.t4'), ChartId: 'chart4' })

    chart({ jsonRoute: './jsonData/node.json', avgElement: $('.t5'), ChartId: 'chart5' })

    chart({ jsonRoute: './jsonData/cs.json', avgElement: $('.t6'), ChartId: 'chart6' })

    chart({ jsonRoute: './jsonData/golang.json', avgElement: $('.t7'), ChartId: 'chart7' })

    chart({ jsonRoute: './jsonData/sf.json', avgElement: $('.t8'), ChartId: 'chart8' })

    chart({ jsonRoute: './jsonData/cp.json', avgElement: $('.t9'), ChartId: 'chart9' })

    chart({ jsonRoute: './jsonData/ui.json', avgElement: $('.t10'), ChartId: 'chart10' })

    chart({ jsonRoute: './jsonData/android.json', avgElement: $('.t11'), ChartId: 'chart11' })

    chart({ jsonRoute: './jsonData/ios.json', avgElement: $('.t12'), ChartId: 'chart12' })

    function chart(params) {

        var myChart = echarts.init(document.getElementById(params.ChartId));

        $.getJSON(params.jsonRoute, function (res) {
            var totalSalary = 0;
            res.map((item) => {
                var num = item.salary.match(/\d+/g);
                var salary = (parseFloat(num[0]) + parseFloat(num[1])) / 2;
                totalSalary += salary;
            })
            params.avgElement.text(`(总平均招聘薪资：${(totalSalary / res.length).toFixed(2)}K)`)

            myChart.setOption(option = {
                formatter: function (fmArr) {
                    var fData = {};
                    var relVal = "";
                    res.filter((item) => {
                        var num = item.salary.match(/\d+/g);
                        var salary = (parseFloat(num[0]) + parseFloat(num[1])) / 2;
                        if (item.company == fmArr[0].name && salary == fmArr[0].data) {
                            fData = item;
                        }
                    })

                    relVal = `公司名称：${fData.company}<br/>
                              任务职位：${fData.position}<br/>
                              公司信息：${fData.companyInfo[0]}|${fData.companyInfo[1]}|${fData.companyInfo[2]}<br/>
                              工作年限：${fData.primaryInfo[1]}<br/>
                              学历要求：${fData.primaryInfo[2]}<br/>
                              薪资区间：${fData.salary}<br/>
                              办公地点：${fData.primaryInfo[0]}<br/>`

                    return relVal;
                },
                tooltip: {
                    trigger: 'axis'
                },
                xAxis: {
                    data: res.map((item) => item.company)
                },
                yAxis: {
                    splitLine: {
                        show: false
                    }
                },
                toolbox: {
                    left: 'center',
                    feature: {
                        dataZoom: {
                            yAxisIndex: 'none'
                        },
                        restore: {},
                        saveAsImage: {}
                    }
                },
                dataZoom: [{
                    startValue: '2014-06-01'
                }, {
                    type: 'inside'
                }],
                visualMap: {
                    top: 10,
                    right: 10,
                    pieces: [{
                        gt: 0,
                        lte: 5,
                        color: '#096'
                    }, {
                        gt: 5,
                        lte: 10,
                        color: '#ffde33'
                    }, {
                        gt: 10,
                        lte: 30,
                        color: '#ff9933'
                    }, {
                        gt: 30,
                        lte: 40,
                        color: '#cc0033'
                    },
                    {
                        gt: 40,
                        lte: 80,
                        color: '#7e0023'
                    }],
                    outOfRange: {
                        color: '#999'
                    }
                },
                series: {
                    name: '平均招聘薪资',
                    type: 'line',
                    data: res.map((item) => {
                        var num = item.salary.match(/\d+/g);
                        var salary = (parseFloat(num[0]) + parseFloat(num[1])) / 2;
                        return salary;
                    }),
                    markLine: {
                        silent: true,
                        data: [{
                            yAxis: 5
                        }, {
                            yAxis: 10
                        }, {
                            yAxis: 15
                        }]
                    }
                }
            });

        })
    }




</script>